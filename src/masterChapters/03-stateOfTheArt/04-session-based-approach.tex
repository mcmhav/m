% !TEX root = ../../report.tex

\section{Sessions}

% mtodo theoretical background?

    Different ways of personalizing recommendations, such as collaborative filtering and content based filtering, have been explored in~\ref{sec:recsys}.
    A common issue with these types of recommendations is that when the data is sparse the recommendations suffer.
    Through utilizing the usage patterns from the users to construct sessions, some of the sparsity gaps can be filled.
    The patterns can help to understand the pre-purchase patterns, products they see and what they buy.
    This information can also reveal interesting relationships between products.

    The data from SoBazaar is based on the actions of its users.
    From this user sessions can be constructed.
    A user session is the sequence of events from the time the user opens the application till the user closes the application, a user will therefore often end up with producing many sessions.

    This section will look into how sessions can be used to tell more about the users and approaches to improve product recommendations based on the user sessions.

\subsection{Mining}
    Data mining can be split into two main steps~\cite{Cho2002329}:
    \begin{itemize}
        \item \emph{Data Preparation} - In the data preparation step the sessions are built. They are built based on the usage during a single visit to the application, web page or system the user is accessing. It is the sequence of events produced by the user actions during the visit.
        \item \emph{Pattern Discovery} - In the pattern discovery step the system use the sessions gathered in the previous step to discover association rules, sequential patterns, usage clusters, page clusters, user classification or any other pattern discovery method.
    \end{itemize}

\subsubsection{Data Preparation} % (fold)
    \label{par:Data_Preparation}
    When a user accesses an application or web page, the system can store the footprints of the user.
    Within these footprints the system can embed information such as, which browser used by user, location of the user, event triggered by user and time stamp.
    This bundle of information is called an event, a the set of events produced by the user during an application visit or web page visit, is called a session.

\subsubsection{Pattern Discovery} % (fold)
    \label{par:pattern_discovery}
    Pattern discovery can be done after the data has been collected from the events.
    The patterns discovered can help the system to infer relationships between users and items.

\paragraph{Association Rules} % (fold)
    \label{subp:association_rules}
    The association rule describes how item X and Y are coupled, this coupling is the percentage of transactions that contain both item X and item Y.

    One simple way of discovering this association is through the aprior algorithm~\cite{Agrawal:1994:FAM:645920.672836}.

    With this set of rules for the items, item taxonomies can be used to infer knowledge regarding the items.
    For instance; sessions when buying blue skirts often include buying of red shoes.
    More generally the association rules would allow the system to make assumptions regarding which items to suggest in context of other items.
    % easy example: http://nikhilvithlani.blogspot.no/2012/03/apriori-algorithm-for-data-mining-made.html
\paragraph{Sequential Patterns} % (fold)
    \label{subp:sequential_patterns}
    The sequential patterns can be used to build Markov models to predict the next step the user will take based on the sequential pattern of the events from the sessions~\cite{Deshpande:2004:SMM:990301.990304}.

    An issue with using the Markov model is that if first-order is being used, the accuracy can be faulty, since the model will not be looking far enough behind.
    Handling this with an higher-order model might solve the inaccuracy due to too low order, but might cause an issue with high state space complexity, and might also reduce coverage.
    Which can be handled through training a set of K different Markov models, with K different orders, All-$K^{th}$-Order Markov model, but the space complexity issue will still be present.

    The Markov model predicts future actions through looking at past actions.
    So for first-order, the model looks at the last event performed to predict the next event of the user.
    The higher the order, the further back the model is looking in the event set and will produce a more complicated model, the higher the order.
    This can be handled through the usage of a selective Markov model~\cite{Deshpande:2004:SMM:990301.990304}

    One issue with the Markov model is that a user will not get predicted new items if the sessions used to predict future actions are only based on the own users sessions.
    One way of making use of the patterns and producing new recommendations is trough matching sequential patterns from users with one-another. \marginpar{something not right}
\paragraph{Usage Clusters} % (fold)
    \label{subp:usage_clusters}
    The usage clusters are usually built up from the different features from the events in the session, where the features are collected and used to model the user.

    \begin{table}[H]
        \centering
        \begin{tabular}{l}
        	\toprule
            \emph{Event features} \\ \midrule
            Amount of purchases \\
            Amount of views \\
            Amount of wants  \\
            Time spent on items \\
            Overall average time on items \\
            Click to buy rate \\
            Search query~\cite{Zhang:2006:MSE:1135777.1136004}  \\
            What was done before a specific action  \\
            \bottomrule
        \end{tabular}
        \caption[Event Features]{Set of event features used for finding usage clusters and model the users behavior}
        \label{table:uasageCluster}
    \end{table}
\paragraph{Page Clusters} % (fold)
    \label{subp:page_clusters}
    Page clustering will help the system to understand which pages belong together.
    For instance when searching for Harry Potter, the user might have interest in knowing more about the author J.K. Rowling, and the system might benefit from clustering queries of here with Harry Potter~\cite{Zhang:2006:MSE:1135777.1136004}.


\subsection{Analyzing}
    Analyzing the model of the user


\subsection{Recommending}
    Using the model to help personalizing the recommendation for the user

\subsection{Discussion}

\subsubsection{Limitations}
    What are the limitations of a session based approach to recommendations.

\subsubsection{Future}
    Time spent and scrolling on page have shown to suggest strong positive relationship with explicit interest~\cite{Claypool01inferringuser}.

    Relative preferences derived from clicks are reasonably accurate~\cite{Joachims:2007:EAI:1229179.1229181}
